@import url('https://fonts.googleapis.com/css2?family=Cormorant+Garamond:ital,wght@0,300;0,400;0,500;0,600;0,700;1,300;1,400;1,500;1,600;1,700&family=Jost:wght@300;400;500;600&display=swap');

:root {
  --bg: #F5F3EE;
  --text: #1A1A1A;
  --accent: #1F33FF;
  --sub: #7A7A7A;
  --line: #DCD8D0;
  --serif: 'Cormorant Garamond', 'Playfair Display', Georgia, serif;
  --sans: Futura, 'Jost', 'Trebuchet MS', Arial, sans-serif;
}

*,
*::before,
*::after {
  box-sizing: border-box;
  margin: 0;
  padding: 0
}

html {
  scroll-behavior: smooth
}

body {
  background: var(--bg);
  color: var(--text);
  font-family: var(--sans);
  font-weight: 400;
  -webkit-font-smoothing: antialiased;
  line-height: 1.7
}

body.lang-zh * {
  font-style: normal !important
}

em {
  font-style: italic
}

body.lang-zh em {
  font-style: normal
}

/* NAV */
.nav {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  z-index: 100;
  height: 56px;
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 0 40px;
  background: rgba(245, 243, 238, .88);
  backdrop-filter: saturate(180%) blur(14px);
  border-bottom: 1px solid var(--line);
  font-size: 11px;
  letter-spacing: .12em;
  text-transform: uppercase
}

.nav-brand {
  font-family: var(--sans);
  font-size: 11px;
  font-weight: 500;
  letter-spacing: .14em;
  text-transform: uppercase
}

.nav-links {
  display: flex;
  gap: 24px;
  align-items: center
}

.nav-links a {
  color: var(--sub);
  text-decoration: none;
  font-size: 11px;
  letter-spacing: .12em;
  text-transform: uppercase;
  transition: color .2s;
  cursor: pointer
}

.nav-links a:hover {
  color: var(--text)
}

.lang-toggle {
  all: unset;
  cursor: pointer;
  padding: 5px 14px;
  border: 1px solid var(--line);
  border-radius: 999px;
  font-family: var(--sans);
  font-size: 10px;
  letter-spacing: .1em;
  color: var(--sub);
  transition: .2s
}

.lang-toggle:hover {
  color: var(--text);
  border-color: var(--accent)
}

/* HERO */
.hero {
  display: grid;
  grid-template-columns: 1fr 1fr;
  min-height: 100vh;
  padding: 80px 80px 0;
  position: relative;
  overflow: hidden;
  align-items: center;
  gap: 40px
}

.hero-left {
  z-index: 2;
  max-width: 600px
}

.hero-tag {
  font-size: 10px;
  font-weight: 500;
  letter-spacing: .2em;
  text-transform: uppercase;
  color: var(--sub);
  margin-bottom: 24px
}

.hero-title {
  font-family: var(--serif);
  font-size: clamp(56px, 7.5vw, 110px);
  font-weight: 300;
  line-height: .95;
  letter-spacing: -0.02em
}

.hero-title em {
  color: var(--accent)
}

.hero-meta {
  margin-top: 48px;
  display: flex;
  flex-direction: column;
  gap: 12px
}

/* UK highlight in hero title */
.uk-highlight {
  color: #1F33FF;
  text-transform: uppercase;
  letter-spacing: .06em;
  font-style: normal;
  display: inline-block;
  animation: ukShimmer 1.6s ease-out both;
}

@keyframes ukShimmer {
  0% {
    opacity: 0;
    transform: translateY(12px);
    filter: blur(4px);
  }

  60% {
    opacity: 1;
    transform: translateY(-2px);
    filter: blur(0);
  }

  100% {
    opacity: 1;
    transform: translateY(0);
  }
}

.hero-meta .hm-line {
  font-size: 12px;
  letter-spacing: .14em;
  text-transform: uppercase;
  color: var(--sub)
}

.hm-loc {
  cursor: default;
  transition: color .3s;
  position: relative;
  display: inline-block
}

.hm-loc::after {
  content: '';
  position: absolute;
  bottom: -2px;
  left: 0;
  width: 100%;
  height: 1px;
  background: var(--accent);
  transform: scaleX(0);
  transform-origin: left;
  transition: transform .3s ease
}

.hm-loc.active {
  color: var(--accent)
}

.hm-loc.active::after {
  transform: scaleX(1)
}

/* HERO MAP FRAME */
.hero-right {
  position: relative;
  width: 100%;
  height: 80vh;
  display: flex;
  align-items: center;
  justify-content: center
}

.map-frame {
  position: absolute;
  inset: 20px;
  border: none;
  box-shadow: none;
  background: transparent;
  display: flex;
  align-items: center;
  justify-content: center;
  overflow: hidden
}

.uk-mesh {
  width: 110%;
  height: 110%;
  opacity: .4
}

.uk-mesh .mesh-lines {
  opacity: .3
}

.uk-mesh .map-dot {
  transition: all .4s cubic-bezier(.4, 0, .2, 1);
  transform-origin: center;
  transform-box: fill-box
}

.uk-mesh .map-dot.active {
  fill: #1F33FF !important;
  r: 6;
  filter: drop-shadow(0 0 14px rgba(31, 51, 255, .7)) drop-shadow(0 0 6px rgba(31, 51, 255, .4))
}

.scroll-indicator {
  position: absolute;
  bottom: 40px;
  left: 40px;
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 12px;
  color: var(--sub);
  z-index: 2
}

.scroll-indicator svg {
  width: 18px;
  height: 40px;
  stroke: currentColor;
  fill: none;
  animation: mouseScroll 2s infinite
}

@keyframes mouseScroll {
  0% {
    transform: translateY(0)
  }

  50% {
    transform: translateY(8px)
  }

  100% {
    transform: translateY(0)
  }
}

/* SECTIONS */
section {
  min-height: none;
  padding: 120px 80px 80px;
  max-width: 1400px;
  margin: 0 auto;
  position: relative
}

#plan {
  padding-bottom: 48px
}

.section-label {
  font-size: 11px;
  letter-spacing: .18em;
  text-transform: uppercase;
  color: var(--sub);
  margin-bottom: 20px
}

.section-title {
  font-family: var(--serif);
  font-size: clamp(40px, 5vw, 72px);
  font-weight: 400;
  font-style: italic;
  line-height: 1.05;
  letter-spacing: -0.02em;
  margin-bottom: 16px
}

.section-lede {
  max-width: 720px;
  font-size: 15px;
  line-height: 1.8;
  color: var(--sub);
  margin-bottom: 64px
}

/* PURPOSE DECK */
#purpose {
  padding-bottom: 100px;
  text-align: center;
  display: flex;
  flex-direction: column;
  align-items: center
}

#purpose .section-label {
  margin-bottom: 24px
}

.purpose-deck {
  font-family: var(--serif);
  font-size: clamp(28px, 3.8vw, 48px);
  line-height: 1.35;
  color: var(--text);
  max-width: 800px;
  margin: 0 auto 48px;
  position: relative;
  padding: 48px 0
}

.purpose-deck::before,
.purpose-deck::after {
  content: '';
  position: absolute;
  left: 50%;
  transform: translateX(-50%);
  width: 60px;
  height: 1px;
  background: var(--line)
}

.purpose-deck::before {
  top: 0
}

.purpose-deck::after {
  bottom: 0
}

.purpose-output {
  display: inline-flex;
  align-items: center;
  gap: 16px;
  padding: 20px 32px;
  border: 1px solid var(--line);
  background: rgba(255, 255, 255, .5);
  font-size: 14px;
  letter-spacing: .06em
}

.purpose-output span {
  font-family: var(--serif);
  font-style: italic;
  color: var(--accent);
  font-size: 18px
}

/* RAIL (sticky) */
.rail-sticky {
  position: sticky;
  top: 56px;
  z-index: 50;
  background: rgba(245, 243, 238, .95);
  backdrop-filter: blur(8px);
  padding: 20px 0;
  border-bottom: 1px solid var(--line);
  margin-bottom: 40px
}

.rail {
  display: flex;
  align-items: center;
  justify-content: space-between;
  position: relative;
  max-width: 1000px;
  margin: 0 auto
}

.rail::before {
  content: '';
  position: absolute;
  left: 40px;
  right: 40px;
  top: 20px;
  height: 1px;
  background: var(--line);
  z-index: 0
}

.rail-node {
  position: relative;
  z-index: 1;
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 10px;
  cursor: pointer;
  background: transparent;
  -webkit-tap-highlight-color: transparent
}

.rail-node,
.rail-node:visited,
.rail-node:focus {
  color: inherit;
  outline: none
}

.rail-icon {
  width: 40px;
  height: 40px;
  border-radius: 50%;
  border: 1px solid var(--line);
  background: var(--bg);
  display: flex;
  align-items: center;
  justify-content: center;
  transition: transform .25s, box-shadow .25s
}

.rail-icon svg {
  width: 18px;
  height: 18px;
  stroke: var(--sub);
  fill: none;
  stroke-width: 1.2;
  transition: stroke .25s
}

.rail-label {
  font-size: 10px;
  letter-spacing: .14em;
  text-transform: uppercase;
  color: var(--sub);
  transition: color .25s;
  background: var(--bg);
  padding: 0 8px
}

/* hover: scale + slightly stronger shadow ONLY — no color change */
.rail-node:hover .rail-icon {
  transform: scale(1.04);
  box-shadow: 0 4px 16px rgba(0, 0, 0, .06)
}

/* active: blue icon bg + blue label + light glow */
.rail-node.active .rail-icon {
  background: #1F33FF;
  border-color: #1F33FF;
  transform: translateY(-2px);
  box-shadow: 0 6px 20px rgba(31, 51, 255, .18)
}

.rail-node.active .rail-icon svg {
  stroke: #fff
}

.rail-node.active .rail-label {
  color: #1F33FF;
  font-weight: 600
}

/* MODULES + TABS */
.module {
  margin-bottom: 100px;
  scroll-margin-top: 160px;
  position: relative
}

.mod-header {
  margin-bottom: 32px
}

.mod-num {
  font-family: var(--serif);
  font-size: 18px;
  color: var(--accent);
  margin-bottom: 8px
}

.mod-title {
  font-family: var(--serif);
  font-size: 36px;
  font-style: italic;
  margin-bottom: 8px
}

.mod-subtitle {
  font-size: 12px;
  letter-spacing: .14em;
  text-transform: uppercase;
  color: var(--sub)
}

/* SUB-TABS INTERFACE */
.subtabs {
  display: flex;
  gap: 12px;
  border-bottom: 1px solid var(--line);
  margin-bottom: 32px;
  flex-wrap: wrap
}

.subtab {
  all: unset;
  cursor: pointer;
  padding: 12px 24px;
  font-size: 11px;
  letter-spacing: .12em;
  text-transform: uppercase;
  color: var(--sub);
  border: 1px solid transparent;
  border-bottom: none;
  transition: .3s;
  font-family: var(--sans);
  background: transparent
}

.subtab.active {
  background: rgba(255, 255, 255, .6);
  border-color: var(--line);
  color: var(--accent)
}

.subpanel {
  display: none;
  animation: fadePanel .3s ease;
  background: rgba(255, 255, 255, .4);
  border: 1px solid var(--line);
  padding: 40px;
  position: relative
}

.subpanel.active {
  display: block
}

@keyframes fadePanel {
  from {
    opacity: 0;
    transform: translateY(10px)
  }

  to {
    opacity: 1;
    transform: translateY(0)
  }
}

/* INSIDE SUBPANEL */
.sp-obj {
  font-size: 16px;
  line-height: 1.6;
  color: var(--text);
  margin-bottom: 24px;
  font-family: var(--serif);
  font-style: italic
}

.sp-test label,
.sp-out label,
.sp-ev label {
  font-size: 10px;
  letter-spacing: .12em;
  text-transform: uppercase;
  color: var(--sub);
  display: block;
  margin-bottom: 12px
}

.sp-test ul {
  list-style: none;
  margin-bottom: 24px
}

.sp-test li {
  font-size: 14px;
  color: var(--text);
  padding: 6px 0;
  border-bottom: 1px solid rgba(0, 0, 0, .04)
}

.sp-test li::before {
  content: '→';
  color: var(--accent);
  margin-right: 8px;
  font-family: var(--serif)
}

.sp-out {
  margin-bottom: 24px;
  font-size: 14px;
  font-weight: 500;
  color: var(--accent)
}

.sp-ev {
  display: flex;
  gap: 16px;
  margin-bottom: 32px
}

.sp-ev-box {
  flex: 1;
  border: 1px dashed var(--line);
  background: rgba(255, 255, 255, .5);
  padding: 20px;
  font-size: 11px;
  color: var(--sub);
  text-align: center
}

.pill-link {
  display: inline-flex;
  align-items: center;
  gap: 8px;
  padding: 12px 24px;
  border: 1px solid var(--accent);
  border-radius: 999px;
  font-size: 11px;
  letter-spacing: .1em;
  text-transform: uppercase;
  color: var(--accent);
  text-decoration: none;
  transition: all .3s
}

.pill-link:hover {
  background: var(--accent);
  color: #fff;
  box-shadow: 0 8px 24px rgba(31, 51, 255, .2)
}

/* HIGHLIGHTS CARDS */
.hl-scroller {
  display: flex;
  overflow-x: auto;
  scroll-snap-type: x mandatory;
  gap: 24px;
  padding-bottom: 24px;
  scrollbar-width: none
}

.hl-scroller::-webkit-scrollbar {
  display: none
}

.hl-card {
  min-width: 320px;
  max-width: 400px;
  flex-shrink: 0;
  scroll-snap-align: start;
  border: 1px solid var(--line);
  background: rgba(255, 255, 255, .4);
  transition: all .3s;
  cursor: pointer;
  position: relative;
  overflow: hidden
}

.hl-card:hover {
  border-color: var(--accent);
  transform: translateY(-4px);
  box-shadow: 0 12px 40px rgba(0, 0, 0, .06)
}

.hl-img {
  height: 200px;
  background: #EAE8E3;
  position: relative;
  overflow: hidden
}

.hl-img img {
  width: 100%;
  height: 100%;
  object-fit: cover;
  opacity: .8;
  transition: .4s
}

.hl-card:hover .hl-img img {
  transform: scale(1.05);
  opacity: 1
}

.hl-info {
  padding: 24px
}

.hl-title {
  font-family: var(--serif);
  font-size: 22px;
  margin-bottom: 8px
}

.hl-desc {
  font-size: 13px;
  color: var(--sub);
  line-height: 1.6
}

.hl-card a {
  position: absolute;
  inset: 0;
  z-index: 2
}

/* LIGHTBOX */
.lightbox {
  position: fixed;
  inset: 0;
  background: rgba(245, 243, 238, .98);
  z-index: 200;
  display: none;
  align-items: center;
  justify-content: center;
  padding: 40px;
  opacity: 0;
  transition: opacity .3s
}

.lightbox.show {
  display: flex;
  opacity: 1
}

.lb-content {
  max-width: 1000px;
  width: 100%;
  position: relative;
  display: flex;
  flex-direction: column;
  gap: 24px
}

.lb-close {
  position: absolute;
  top: -40px;
  right: 0;
  background: none;
  border: none;
  font-size: 24px;
  cursor: pointer;
  color: var(--text)
}

.lb-img {
  width: 100%;
  max-height: 70vh;
  object-fit: contain;
  background: #fff;
  border: 1px solid var(--line)
}

.lb-text {
  text-align: center
}

.lb-text h3 {
  font-family: var(--serif);
  font-size: 32px;
  margin-bottom: 8px
}

.lb-text p {
  font-size: 14px;
  color: var(--sub)
}

/* VISITS CARDS */
.v-scope {
  display: flex;
  align-items: center;
  gap: 8px;
  font-size: 10px;
  letter-spacing: .12em;
  text-transform: uppercase;
  color: var(--sub);
  margin-bottom: 4px
}

.v-scope svg {
  width: 14px;
  height: 14px;
  stroke: currentColor;
  fill: none
}

.v-tabs {
  margin-bottom: 24px;
  display: flex;
  gap: 12px;
  flex-wrap: wrap
}

.v-tabs .subtab.active {
  border-color: var(--accent)
}

.vcard {
  border: 1px solid var(--line);
  margin-bottom: 12px;
  background: rgba(255, 255, 255, .3);
  transition: .3s
}

.vcard:hover {
  border-color: var(--accent)
}

.vc-head {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 24px;
  cursor: pointer
}

.vc-name {
  font-family: var(--serif);
  font-size: 20px;
  font-weight: 400
}

.vc-status {
  font-size: 10px;
  letter-spacing: .1em;
  text-transform: uppercase;
  display: flex;
  align-items: center;
  gap: 6px
}

.vc-status .dot {
  width: 6px;
  height: 6px;
  border-radius: 50%
}

.vc-status.confirmed {
  color: #2B9;
}

.vc-status.confirmed .dot {
  background: #2B9
}

.vc-status.pending {
  color: #D9C;
}

.vc-status.pending .dot {
  background: #D9C
}

.vc-status.optional {
  color: var(--sub);
}

.vc-status.optional .dot {
  background: var(--sub)
}

.vc-chevron {
  transition: transform .3s;
  color: var(--sub)
}

.vcard.open .vc-chevron {
  transform: rotate(180deg)
}

.vc-body {
  max-height: 0;
  overflow: hidden;
  opacity: 0;
  transition: all .4s ease;
  padding: 0 24px
}

.vcard.open .vc-body {
  max-height: 800px;
  opacity: 1;
  padding: 0 24px 32px
}

.vc-grid {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 32px;
  margin-top: 16px;
  border-top: 1px solid rgba(0, 0, 0, .05);
  padding-top: 24px
}

/* STEPPER (CLOSING) */
/* ACCENT PHRASE in purpose */
.accent-phrase {
  font-style: italic;
  color: #1F33FF;
  text-decoration: underline;
  text-decoration-color: rgba(31, 51, 255, .25);
  text-underline-offset: 4px;
  text-decoration-thickness: 1px;
}

.accent-phrase.in-view {
  animation: accentFade .3s ease-out both;
}

.accent-phrase:hover {
  text-shadow: 0 0 12px rgba(31, 51, 255, .2);
}

@keyframes accentFade {
  0% {
    opacity: .4;
    filter: blur(3px);
  }

  100% {
    opacity: 1;
    filter: blur(0);
  }
}

.closing {
  min-height: 80vh;
  display: flex;
  align-items: center;
  justify-content: center;
  text-align: center
}

.closing-inner {
  max-width: 800px;
  width: 100%
}

.stepper {
  display: flex;
  flex-direction: column;
  gap: 20px;
  margin: 48px auto;
  text-align: left;
  max-width: 600px
}

.step {
  display: flex;
  align-items: flex-start;
  gap: 24px;
  position: relative
}

.step:not(:last-child)::after {
  content: '';
  position: absolute;
  left: 15px;
  top: 40px;
  bottom: -10px;
  width: 1px;
  background: var(--line)
}

.st-num {
  width: 32px;
  height: 32px;
  border-radius: 50%;
  background: rgba(255, 255, 255, .5);
  border: 1px solid var(--line);
  display: flex;
  align-items: center;
  justify-content: center;
  font-family: var(--serif);
  font-size: 16px;
  color: var(--accent);
  z-index: 2;
  flex-shrink: 0
}

.st-text {
  padding-top: 4px
}

.st-text h4 {
  font-size: 15px;
  font-weight: 500;
  margin-bottom: 4px
}

.st-text p {
  font-size: 13px;
  color: var(--sub)
}

/* BUDGET OVERLAY */
.approve-modal {
  position: fixed;
  inset: 0;
  background: rgba(245, 243, 238, .95);
  z-index: 200;
  display: none;
  align-items: center;
  justify-content: center;
  padding: 40px;
  opacity: 0;
  transition: opacity .3s
}

.approve-modal.show {
  display: flex;
  opacity: 1
}

.am-box {
  background: #fff;
  border: 1px solid var(--line);
  padding: 48px;
  max-width: 600px;
  width: 100%;
  box-shadow: 0 24px 80px rgba(0, 0, 0, .1);
  position: relative;
  transform: translateY(20px);
  transition: transform .4s
}

.approve-modal.show .am-box {
  transform: translateY(0)
}

@media(max-width:900px) {
  .hero {
    grid-template-columns: 1fr;
    padding: 80px 24px 0
  }

  .hero-right {
    height: 40vh;
    order: -1
  }

  section {
    padding: 80px 24px 40px
  }

  .rail {
    flex-wrap: nowrap;
    overflow-x: auto;
    justify-content: flex-start;
    gap: 16px;
    padding-bottom: 12px;
    mask-image: linear-gradient(to right, #000 80%, transparent)
  }

  .rail::before {
    display: none
  }

  .rail-node {
    min-width: 64px
  }

  .vc-grid {
    grid-template-columns: 1fr;
    gap: 24px
  }
}
/* ===== Mobile responsive patch ===== */
:root{
  --page-pad: 72px;
}
body{ overflow-x:hidden; }
img, svg{ max-width:100%; height:auto; }

/* global container spacing */
section{ padding-left:var(--page-pad); padding-right:var(--page-pad); }

@media (max-width: 960px){
  :root{ --page-pad: 24px; }

  /* nav */
  .nav{ padding:14px 18px; }
  .nav-links{ gap:14px; }
  .nav-links a{ font-size:12px; letter-spacing:.12em; }
  .lang-toggle{ transform:scale(.95); }

  /* hero layout: stack */
  .hero{
    min-height: unset;
    padding-top: 96px;
    padding-bottom: 56px;
  }
  .hero-left, .hero-right{ width:100%; }
  .hero-title{ font-size: clamp(48px, 9vw, 72px); line-height:1.05; }
  .hero-right{ margin-top: 28px; }
  .map-frame{ width:100%; max-width:520px; margin:0 auto; }

  /* purpose / sections */
  .section-title{ font-size: clamp(26px, 5.5vw, 36px); }
  .purpose-deck{ font-size: clamp(18px, 4.2vw, 24px); }

  /* sticky rail -> horizontal scroll */
  .rail-sticky{ position: sticky; top: 64px; z-index: 20; }
  .rail{
    overflow-x:auto;
    -webkit-overflow-scrolling: touch;
    gap: 18px;
    padding: 10px 6px;
    border-radius: 14px;
  }
  .rail-node{ min-width: 120px; flex: 0 0 auto; }

  /* modules/cards */
  .module{ padding: 28px 18px; }
  .mod-header{ grid-template-columns: 1fr; row-gap: 8px; }
  .subtabs{ flex-wrap:wrap; gap:10px; }

  /* highlights: 2-col -> 1-col */
  #highlights > div[style*="grid-template-columns:1fr 1fr"]{
    grid-template-columns: 1fr !important;
  }
  .hl-scroller{
    overflow-x:auto;
    -webkit-overflow-scrolling: touch;
    padding-bottom: 8px;
  }
  .hl-card{ min-width: 260px; }

  /* visits cards */
  .vc-head{ grid-template-columns: 1fr auto; row-gap: 10px; }
  .vc-status{ justify-self:start; }

  /* closing stepper */
  .stepper{ gap:12px; }
}

@media (max-width: 420px){
  :root{ --page-pad: 16px; }
  .nav-links a{ display:none; } /* keep header clean */
  .nav{ justify-content:space-between; }
}
